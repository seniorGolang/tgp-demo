// GENERATED BY 'T'ool 'G'ateway. DO NOT EDIT.
package plugin

// PluginInfo содержит информацию о плагине.
// Все поля сериализуемы в JSON для совместимости с WASM.
type Info struct {
	// Name - уникальное имя плагина.
	Name string `json:"name"`
	// Description - краткое описание плагина.
	Description string `json:"description"`
	// Author - автор плагина.
	Author string `json:"author"`
	// License - лицензия плагина.
	License string `json:"license"`
	// Category - категория плагина (объявляется плагином, например: "server", "client", "documentation").
	Category string `json:"category"`
	// Commands - список команд, которые предоставляет плагин.
	// Каждая команда может иметь свой путь, описание и опции.
	Commands []Command `json:"commands"`
	// Group - группа плагинов для совместимости (плагины из одной группы совместимы друг с другом).
	Group string `json:"group,omitempty"`
	// Doc - документация плагина в формате Markdown.
	Doc string `json:"doc"`
	// Options - описание настроек, которые плагин принимает (общие для всех команд, если не переопределены в Command).
	Options []Option `json:"options"`
	// AllowedHosts - белый список хостов для сетевых подключений (только для WASM плагинов).
	// Если пусто, плагин не может выполнять сетевые подключения.
	// Поддерживаемые форматы:
	// - Доменные имена: точное совпадение ("api.example.com") или wildcard ("*.example.com")
	// - IP-адреса: точное совпадение ("192.168.1.1", "::1", "[2001:db8::1]") или CIDR ("192.168.1.0/24", "2001:db8::/32")
	// - Проверка резолва: если домен резолвится в разрешённый IP (точное совпадение или CIDR), подключение разрешается
	// Пример: ["api.example.com", "*.example.com", "192.168.1.0/24", "10.0.0.1"]
	AllowedHosts []string `json:"allowedHosts,omitempty"`
	// AllowedShellCMDs - белый список команд, которые плагин может запускать через хост (только для WASM плагинов).
	// Если пусто, плагин не может выполнять команды.
	// Формат: имена команд (например: ["go", "git", "npm"])
	AllowedShellCMDs []string `json:"allowedShellCMDs,omitempty"`
	// AllowedEnvVars - белый список переменных окружения, которые плагин может получать от хоста (только для WASM плагинов).
	// Если пусто, плагин не получает переменные окружения от хоста.
	// Формат: имена переменных окружения (например: ["PATH", "HOME", "USER", "GOROOT", "GOPATH"])
	AllowedEnvVars []string `json:"allowedEnvVars,omitempty"`
	// Dependencies - список зависимостей плагина.
	// Формат: ["plugin-name1@^1.0.0", "plugin-name2@^2.1.0"]
	// Версия указывается с учетом semver совместимости (^, ~, >= и т.д.).
	// Для трансформеров определяет порядок выполнения.
	// Для команд определяет плагины, которые должны выполниться перед командой.
	// Если версия не указана, то совместимость с любыми версиями.
	// Если зависимость не установлена, tg предлагает её установить.
	Dependencies []string `json:"dependencies,omitempty"`
	// Kind - тип плагина: "pre", "stage", "command", "post".
	// Определяет роль плагина в цепочке выполнения.
	// - "pre" - плагины, выполняющиеся до команды
	// - "stage" - плагины, выполняющиеся до команды
	// - "command" - основная команда, выполняемая пользователем
	// - "post" - плагины, выполняющиеся после команды
	// Если не указано, определяется автоматически: если есть Commands, то "command", иначе "stage".
	Kind string `json:"kind,omitempty"`
	// Always - для pre и post плагинов: выполнять ли всегда для всех команд.
	// По умолчанию false (плагин выполняется только при наличии зависимостей).
	// Плагины с always не входят в прямую цепочку исполнения, но нужны всегда для всех команд.
	Always bool `json:"always,omitempty"`
	// Silent - для pre, post и stage плагинов: не выводить ли логи при выполнении.
	// По умолчанию false (хост может выводить логи при выполнении).
	// Если true, хост не выводит логи при выполнении, но плагин может выводить логи сам, если посчитает нужным.
	Silent bool `json:"silent,omitempty"`
	// InitPkgs - список пакетов (директорий), которые плагин имеет право создать при plugin init.
	// Пути указываются относительно корня проекта (например: ["internal/mypackage", "pkg/utils"]).
	// Если несколько плагинов объявляют один и тот же пакет, выполняется только один плагин,
	// остальные получают предупреждение о конфликте и пропускаются.
	InitPkgs []string `json:"initPkgs,omitempty"`
	// InitFiles - список файлов, которые плагин имеет право создать при plugin init.
	// Пути указываются относительно корня проекта (например: ["config.yaml", "internal/config.go"]).
	// Если несколько плагинов объявляют один и тот же файл, выполняется только один плагин,
	// остальные получают предупреждение о конфликте и пропускаются.
	InitFiles []string `json:"initFiles,omitempty"`
	// AllowedPaths - белый список путей файловой системы с указанием уровня доступа.
	// Применяется при обычном выполнении плагина (Execute).
	// Если пусто, плагин имеет полный доступ к корневой директории проекта.
	// Ключ - путь к каталогу или файлу (поддерживаются абсолютные пути, переменные окружения через $VAR или ${VAR}, и ~ для домашней папки).
	// Значение - уровень доступа: "r" (только чтение), "w" (только запись).
	// Пример: {"internal/cli": "w", "$HOME/.config": "r", "~/data": "w", "/tmp/cache": "w"}
	AllowedPaths map[string]string `json:"allowedPaths,omitempty"`
}

// Command описывает команду плагина.
type Command struct {
	Path            []string `json:"path"`
	Description     string   `json:"description"`
	LongDescription string   `json:"longDescription,omitempty"` // Подробное описание команды (для help). Если не указано, используется info.Doc
	// Options - описание настроек, которые плагин принимает.
	Options []Option `json:"options"`
}

// Option описывает одну настройку плагина.
// Все поля сериализуемы в JSON для совместимости с WASM.
type Option struct {
	// Name - полное имя настройки (ключ, используется как --name в CLI).
	Name string `json:"name"`
	// Short - краткое имя настройки (используется как -s в CLI, опционально).
	Short string `json:"short,omitempty"`
	// Type - тип значения настройки (string, int, bool и т.д.).
	Type string `json:"type"`
	// Description - описание настройки.
	Description string `json:"description"`
	// Required - обязательна ли настройка.
	Required bool `json:"required"`
	// Default - значение по умолчанию (может быть nil).
	// Должно быть JSON-сериализуемым для совместимости с WASM.
	Default any `json:"default,omitempty"`
	// IsPositional - true для позиционных аргументов (не флагов).
	// Позиционные аргументы передаются без флагов, например: `tg plugin install <package>`.
	IsPositional bool `json:"isPositional,omitempty"`
}
