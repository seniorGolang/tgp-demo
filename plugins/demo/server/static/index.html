<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –ø–ª–∞–≥–∏–Ω–æ–≤</title>
    <link rel="stylesheet" href="/style.css">
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>
</head>

<body>
<div class="global-loading" id="global-loading">
    <span class="spinner"></span> <span>–í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∑–∞–ø—Ä–æ—Å...</span>
</div>
<div class="toast-container" id="toast-container"></div>
<div class="container">
    <header>
        <h1>–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –ø–ª–∞–≥–∏–Ω–æ–≤</h1>
        <p>–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ–º—ã—Ö core –¥–ª—è –ø–ª–∞–≥–∏–Ω–æ–≤</p>
    </header>

    <!-- 1. Storage -->
    <div class="section">
        <h2>1. Storage - —Ä–∞–±–æ—Ç–∞ —Å request/response</h2>
        <div class="description">
            <p><strong>–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:</strong> Storage –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É –ø–ª–∞–≥–∏–Ω–∞–º–∏ —á–µ—Ä–µ–∑ request –∏ response. –≠—Ç–æ –æ—Å–Ω–æ–≤–∞ –¥–ª—è —Ü–µ–ø–æ—á–∫–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø–ª–∞–≥–∏–Ω–æ–≤.</p>
            <p><strong>–ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç:</strong></p>
            <ul>
                <li>–ü–æ–∫–∞–∂–µ—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ request Storage</li>
                <li>–í–∫–ª—é—á–∞—è ExecutionPlan (–µ—Å–ª–∏ –µ—Å—Ç—å, –∫–ª—é—á "_execute_plan_")</li>
                <li>–ü–æ–∫–∞–∂–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö Storage –≤ JSON —Ñ–æ—Ä–º–∞—Ç–µ</li>
            </ul>
            <p><strong>–ö—É–¥–∞ —Å–º–æ—Ç—Ä–µ—Ç—å:</strong> ‚Üí –†–µ–∑—É–ª—å—Ç–∞—Ç –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—Å—è –Ω–∏–∂–µ –≤ JSON —Ñ–æ—Ä–º–∞—Ç–µ</p>
        </div>
        <div class="actions">
            <button hx-post="/api/demo/storage" hx-target="#storage-result" hx-swap="innerHTML" hx-indicator="#storage-spinner">
                –ü–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ Storage <span id="storage-spinner" class="spinner htmx-indicator"></span>
            </button>
        </div>
        <div id="storage-result" class="result">
            <div class="loading-text htmx-indicator">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
        </div>
    </div>

    <!-- 2. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ -->
    <div class="section">
        <h2>2. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ - —É—Ä–æ–≤–Ω–∏ –ª–æ–≥–æ–≤</h2>
        <div class="description">
            <p><strong>–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:</strong> –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ slog –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–ª–∞–≥–∏–Ω–∞–º –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è —Ä–∞–∑–Ω—ã—Ö —É—Ä–æ–≤–Ω–µ–π –≤–∞–∂–Ω–æ—Å—Ç–∏ (Debug, Info, Warn, Error) –≤ –∫–æ–Ω—Å–æ–ª—å —Ö–æ—Å—Ç–∞.</p>
            <p><strong>–ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç:</strong></p>
            <ul>
                <li>–û—Ç–ø—Ä–∞–≤–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–∞ —É—Ä–æ–≤–Ω—è—Ö Debug, Info, Warn, Error</li>
                <li>–õ–æ–≥–∏ –±—É–¥—É—Ç –≤–∏–¥–Ω—ã –≤ –∫–æ–Ω—Å–æ–ª–∏ —Ö–æ—Å—Ç–∞</li>
            </ul>
            <p><strong>–ö—É–¥–∞ —Å–º–æ—Ç—Ä–µ—Ç—å:</strong> ‚Üí –õ–æ–≥–∏ –ø–æ—è–≤—è—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª–∏, –≥–¥–µ –∑–∞–ø—É—â–µ–Ω –ø–ª–∞–≥–∏–Ω</p>
        </div>
        <div class="actions">
            <button hx-post="/api/demo/logging" hx-vals='{"level":"debug"}' hx-target="#logging-result" hx-swap="innerHTML" hx-indicator="#logging-spinner">
                Debug <span id="logging-spinner" class="spinner htmx-indicator"></span>
            </button>
            <button hx-post="/api/demo/logging" hx-vals='{"level":"info"}' hx-target="#logging-result" hx-swap="innerHTML" hx-indicator="#logging-spinner">
                Info <span class="spinner htmx-indicator"></span>
            </button>
            <button hx-post="/api/demo/logging" hx-vals='{"level":"warn"}' hx-target="#logging-result" hx-swap="innerHTML" hx-indicator="#logging-spinner">
                Warn <span class="spinner htmx-indicator"></span>
            </button>
            <button hx-post="/api/demo/logging" hx-vals='{"level":"error"}' hx-target="#logging-result" hx-swap="innerHTML" hx-indicator="#logging-spinner">
                Error <span class="spinner htmx-indicator"></span>
            </button>
        </div>
        <div id="logging-result" class="result">
            <div class="loading-text htmx-indicator">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
        </div>
    </div>

    <!-- 3. –§–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ -->
    <div class="section">
        <h2>3. –§–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ - WASI</h2>
        <div class="description">
            <p><strong>–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:</strong> WASI (WebAssembly System Interface) –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –¥–æ—Å—Ç—É–ø –∫ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ —Ö–æ—Å—Ç–∞ —á–µ—Ä–µ–∑ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ Go —Ñ—É–Ω–∫—Ü–∏–∏ (os.ReadFile, os.WriteFile, os.Mkdir –∏ —Ç.–¥.).</p>
            <p><strong>–ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç:</strong></p>
            <ul>
                <li>–°–æ–∑–¥–∞—Å—Ç –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é /tg/tmp/demo/</li>
                <li>–°–æ–∑–¥–∞—Å—Ç —Ñ–∞–π–ª /tg/tmp/demo/test.txt —Å —Å–æ–¥–µ—Ä–∂–∏–º—ã–º</li>
                <li>–ü—Ä–æ—á–∏—Ç–∞–µ—Ç —Å–æ–∑–¥–∞–Ω–Ω—ã–π —Ñ–∞–π–ª</li>
                <li>–ü–æ–∫–∞–∂–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ–ø–µ—Ä–∞—Ü–∏–π</li>
            </ul>
            <p><strong>–ö—É–¥–∞ —Å–º–æ—Ç—Ä–µ—Ç—å:</strong> ‚Üí –†–µ–∑—É–ª—å—Ç–∞—Ç –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—Å—è –Ω–∏–∂–µ, —Ñ–∞–π–ª—ã –±—É–¥—É—Ç —Å–æ–∑–¥–∞–Ω—ã –≤ /tg/tmp/demo/</p>
        </div>
        <div class="actions">
            <button hx-post="/api/demo/filesystem" hx-target="#filesystem-result" hx-swap="innerHTML" hx-indicator="#filesystem-spinner">
                –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª—ã <span id="filesystem-spinner" class="spinner htmx-indicator"></span>
            </button>
        </div>
        <div id="filesystem-result" class="result">
            <div class="loading-text htmx-indicator">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
        </div>
    </div>

    <!-- 4. HTTP –∫–ª–∏–µ–Ω—Ç -->
    <div class="section">
        <h2>4. HTTP –∫–ª–∏–µ–Ω—Ç - –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤</h2>
        <div class="description">
            <p><strong>–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:</strong> HTTP –∫–ª–∏–µ–Ω—Ç –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–ª–∞–≥–∏–Ω–∞–º –≤—ã–ø–æ–ª–Ω—è—Ç—å HTTP –∑–∞–ø—Ä–æ—Å—ã –∫ –≤–Ω–µ—à–Ω–∏–º —Å–µ—Ä–≤–∏—Å–∞–º —á–µ—Ä–µ–∑ —Ö–æ—Å—Ç.</p>
            <p><strong>–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ:</strong> –í WASM –æ–∫—Ä—É–∂–µ–Ω–∏–∏ –∑–∞–ø—Ä–æ—Å—ã –∫ —Å–∞–º–æ–º—É —Å–µ–±–µ (localhost) –º–æ–≥—É—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å –∏–∑-–∑–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π WASM runtime. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–Ω–µ—à–Ω–∏–µ URL –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ–π —Ä–∞–±–æ—Ç—ã.</p>
            <p><strong>–ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç:</strong></p>
            <ul>
                <li>–í—ã–ø–æ–ª–Ω–∏—Ç GET –∑–∞–ø—Ä–æ—Å –∫ –≤–Ω–µ—à–Ω–µ–º—É —Å–µ—Ä–≤–∏—Å—É (httpbin.org)</li>
                <li>–í—ã–ø–æ–ª–Ω–∏—Ç POST –∑–∞–ø—Ä–æ—Å —Å —Ç–µ–ª–æ–º –∫ –≤–Ω–µ—à–Ω–µ–º—É —Å–µ—Ä–≤–∏—Å—É</li>
                <li>–ü–æ–∫–∞–∂–µ—Ç —Å—Ç–∞—Ç—É—Å, –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∏ —Ç–µ–ª–æ –æ—Ç–≤–µ—Ç–∞</li>
            </ul>
            <p><strong>–ö—É–¥–∞ —Å–º–æ—Ç—Ä–µ—Ç—å:</strong> ‚Üí –†–µ–∑—É–ª—å—Ç–∞—Ç –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—Å—è –Ω–∏–∂–µ –≤ JSON —Ñ–æ—Ä–º–∞—Ç–µ.</p>
        </div>
        <div class="actions">
            <button hx-post="/api/demo/http-client" hx-vals='{"method":"GET","url":"https://httpbin.org/get"}' hx-target="#http-client-result" hx-swap="innerHTML" hx-indicator="#http-client-spinner">
                GET httpbin.org/get <span id="http-client-spinner" class="spinner htmx-indicator"></span>
            </button>
            <button hx-post="/api/demo/http-client" hx-vals='{"method":"POST","url":"https://httpbin.org/post","body":"{\"message\":\"Hello from HTTP client!\"}"}' hx-target="#http-client-result" hx-swap="innerHTML" hx-indicator="#http-client-spinner">
                POST httpbin.org/post <span class="spinner htmx-indicator"></span>
            </button>
        </div>
        <div id="http-client-result" class="result">
            <div class="loading-text htmx-indicator">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
        </div>
    </div>

    <!-- 5. HTTP —Å–µ—Ä–≤–µ—Ä -->
    <div class="section">
        <h2>5. HTTP —Å–µ—Ä–≤–µ—Ä - –∑–∞–ø—É—Å–∫ –∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏</h2>
        <div class="description">
            <p><strong>–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:</strong> HTTP —Å–µ—Ä–≤–µ—Ä –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–ª–∞–≥–∏–Ω–∞–º –∑–∞–ø—É—Å–∫–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –≤–µ–±-—Å–µ—Ä–≤–µ—Ä –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤. –≠—Ç–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –∑–∞–ø—É—â–µ–Ω–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ.</p>
            <p><strong>–ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç:</strong></p>
            <ul>
                <li>–ü–æ–∫–∞–∂–µ—Ç —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞</li>
                <li>–ü–æ–∫–∞–∂–µ—Ç –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã</li>
                <li>–°–µ—Ä–≤–µ—Ä —É–∂–µ –∑–∞–ø—É—â–µ–Ω (–∏–Ω–∞—á–µ –≤—ã –±—ã –Ω–µ –≤–∏–¥–µ–ª–∏ —ç—Ç—É —Å—Ç—Ä–∞–Ω–∏—Ü—É)</li>
            </ul>
            <p><strong>–ö—É–¥–∞ —Å–º–æ—Ç—Ä–µ—Ç—å:</strong> ‚Üí –°—Ç–∞—Ç—É—Å –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—Å—è –Ω–∏–∂–µ. –ú–æ–∂–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ —Ä–∞–∑–¥–µ–ª "HTTP –∫–ª–∏–µ–Ω—Ç".</p>
            <p><strong>–û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞:</strong> –ü—Ä–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ —Å–µ—Ä–≤–µ—Ä–∞ –º–µ—Ç–æ–¥ Execute –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è. –•–æ—Å—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç HTTP —Å–µ—Ä–≤–µ—Ä –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ Execute.</p>
        </div>
        <div class="actions">
            <button hx-get="/api/demo/server/status" hx-target="#server-result" hx-swap="innerHTML" hx-indicator="#server-spinner">
                –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç—É—Å <span id="server-spinner" class="spinner htmx-indicator"></span>
            </button>
            <button class="danger" hx-post="/api/demo/stop" hx-target="#server-result" hx-swap="innerHTML" hx-indicator="#server-stop-spinner">
                –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–µ—Ä–≤–µ—Ä <span id="server-stop-spinner" class="spinner htmx-indicator"></span>
            </button>
        </div>
        <div id="server-result" class="result">
            <div class="loading-text htmx-indicator">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
        </div>
    </div>

    <!-- 6. –ö–æ–º–∞–Ω–¥—ã —Ö–æ—Å—Ç–∞ -->
    <div class="section">
        <h2>6. –ö–æ–º–∞–Ω–¥—ã —Ö–æ—Å—Ç–∞ - –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥</h2>
        <div class="description">
            <p><strong>–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:</strong> –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥ —á–µ—Ä–µ–∑ —Ö–æ—Å—Ç –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–ª–∞–≥–∏–Ω–∞–º –∑–∞–ø—É—Å–∫–∞—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –Ω–∞ —Ö–æ—Å—Ç–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, go, git, uname) —Å –∫–æ–Ω—Ç—Ä–æ–ª–µ–º —á–µ—Ä–µ–∑ –±–µ–ª—ã–π —Å–ø–∏—Å–æ–∫.</p>
            <p><strong>–ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç:</strong></p>
            <ul>
                <li>–í—ã–ø–æ–ª–Ω–∏—Ç –∫–æ–º–∞–Ω–¥—É uname -a</li>
                <li>–í—ã–ø–æ–ª–Ω–∏—Ç –∫–æ–º–∞–Ω–¥—É go version</li>
                <li>–í—ã–ø–æ–ª–Ω–∏—Ç –∫–æ–º–∞–Ω–¥—É date</li>
                <li>–ü–æ–∫–∞–∂–µ—Ç stdout, stderr –∏ exit code</li>
            </ul>
            <p><strong>–ö—É–¥–∞ —Å–º–æ—Ç—Ä–µ—Ç—å:</strong> ‚Üí –†–µ–∑—É–ª—å—Ç–∞—Ç –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—Å—è –Ω–∏–∂–µ</p>
        </div>
        <div class="actions">
            <button hx-post="/api/demo/command" hx-vals='{"command":"uname","args":["-a"]}' hx-target="#command-result" hx-swap="innerHTML" hx-indicator="#command-spinner">
                uname -a <span id="command-spinner" class="spinner htmx-indicator"></span>
            </button>
            <button hx-post="/api/demo/command" hx-vals='{"command":"go","args":["version"]}' hx-target="#command-result" hx-swap="innerHTML" hx-indicator="#command-spinner">
                go version <span class="spinner htmx-indicator"></span>
            </button>
            <button hx-post="/api/demo/command" hx-vals='{"command":"date"}' hx-target="#command-result" hx-swap="innerHTML" hx-indicator="#command-spinner">
                date <span class="spinner htmx-indicator"></span>
            </button>
        </div>
        <div id="command-result" class="result">
            <div class="loading-text htmx-indicator">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
        </div>
    </div>

    <!-- 7. –ü–ª–∞–Ω –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è -->
    <div class="section">
        <h2>7. –ü–ª–∞–Ω –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è - –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è</h2>
        <div class="description">
            <p><strong>–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:</strong> ExecutionPlan —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–ª–∞–Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø–ª–∞–≥–∏–Ω–æ–≤. –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–º–æ–≥–∞–µ—Ç –ø–æ–Ω—è—Ç—å –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ—Å—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —à–∞–≥–æ–≤.</p>
            <p><strong>–ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç:</strong></p>
            <ul>
                <li>–ü–æ–ª—É—á–∏—Ç ExecutionPlan –∏–∑ request (–∫–ª—é—á "_execute_plan_")</li>
                <li>–°–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç SVG –≥—Ä–∞—Ñ —Å —à–∞–≥–∞–º–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è</li>
                <li>–ü–æ–∫–∞–∂–µ—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ —à–∞–≥–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è</li>
                <li>–ü–æ–¥—Å–≤–µ—Ç–∏—Ç —Ç–µ–∫—É—â–∏–π —à–∞–≥</li>
            </ul>
            <p><strong>–ö—É–¥–∞ —Å–º–æ—Ç—Ä–µ—Ç—å:</strong> ‚Üí SVG –≥—Ä–∞—Ñ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—Å—è –Ω–∏–∂–µ. JSON –ø–ª–∞–Ω –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤ —Ä–∞–∑–¥–µ–ª–µ "Storage".</p>
        </div>
        <div class="actions">
            <button hx-post="/api/demo/plan" hx-target="#plan-result" hx-swap="innerHTML" hx-indicator="#plan-spinner">
                –í–∏–∑—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–ª–∞–Ω <span id="plan-spinner" class="spinner htmx-indicator"></span>
            </button>
        </div>
        <div id="plan-result" class="result">
            <div class="loading-text htmx-indicator">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
        </div>
    </div>

    <!-- 8. –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ö–æ—Å—Ç–µ -->
    <div class="section">
        <h2>8. –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ö–æ—Å—Ç–µ</h2>
        <div class="description">
            <p><strong>–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:</strong> –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å–∏—Å—Ç–µ–º–µ —Ö–æ—Å—Ç–∞ —á–µ—Ä–µ–∑ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–ª–∞–≥–∏–Ω–∞–º –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è –∫ –æ–∫—Ä—É–∂–µ–Ω–∏—é –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.</p>
            <p><strong>–ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç:</strong></p>
            <ul>
                <li>–í—ã–ø–æ–ª–Ω–∏—Ç –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å–∏—Å—Ç–µ–º–µ</li>
                <li>–°–æ–±–µ—Ä–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ–± OS, Go –≤–µ—Ä—Å–∏–∏, –≤—Ä–µ–º–µ–Ω–∏ –∏ —Ç.–¥.</li>
            </ul>
            <p><strong>–ö—É–¥–∞ —Å–º–æ—Ç—Ä–µ—Ç—å:</strong> ‚Üí –†–µ–∑—É–ª—å—Ç–∞—Ç –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—Å—è –Ω–∏–∂–µ</p>
        </div>
        <div class="actions">
            <button hx-get="/api/demo/host-info" hx-target="#host-info-result" hx-swap="innerHTML" hx-indicator="#host-info-spinner">
                –û–±–Ω–æ–≤–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é <span id="host-info-spinner" class="spinner htmx-indicator"></span>
            </button>
        </div>
        <div id="host-info-result" class="result">
            <div class="loading-text htmx-indicator">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
        </div>
    </div>

    <!-- 9. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è -->
    <div class="section">
        <h2>9. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è - –¥–æ—Å—Ç—É–ø –∫ env</h2>
        <div class="description">
            <p><strong>–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:</strong> –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –ø–æ–∑–≤–æ–ª—è—é—Ç –ø–ª–∞–≥–∏–Ω–∞–º –ø–æ–ª—É—á–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–∏—Å—Ç–µ–º–µ —Ö–æ—Å—Ç–∞ —á–µ—Ä–µ–∑ –±–µ–ª—ã–π —Å–ø–∏—Å–æ–∫ AllowedEnvVars.</p>
            <p>
                <strong>TG_LANG:</strong> –°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤—Å–µ–º –ø–ª–∞–≥–∏–Ω–∞–º —Ö–æ—Å—Ç–æ–º. –°–æ–¥–µ—Ä–∂–∏—Ç —è–∑—ã–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ ISO2a (–Ω–∞–ø—Ä–∏–º–µ—Ä, "en", "ru", "de"), –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π —Ö–æ—Å—Ç–æ–º –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ (LC_ALL, LC_MESSAGES, LANG). –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –ø–ª–∞–≥–∏–Ω–∞. –ù–µ —Ç—Ä–µ–±—É–µ—Ç —É–∫–∞–∑–∞–Ω–∏—è –≤ AllowedEnvVars - –¥–æ—Å—Ç—É–ø–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.
            </p>
            <p><strong>–ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç:</strong></p>
            <ul>
                <li>–ü–æ–ª—É—á–∏—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–∑ –±–µ–ª–æ–≥–æ —Å–ø–∏—Å–∫–∞ AllowedEnvVars</li>
                <li>–ü–æ–∫–∞–∂–µ—Ç TG_LANG (–¥–æ—Å—Ç—É–ø–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)</li>
                <li>–ü–æ–∫–∞–∂–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ –∏—Ö –∑–Ω–∞—á–µ–Ω–∏—è</li>
                <li>–ü—Ä–æ–¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É —Å os.Getenv()</li>
            </ul>
            <p><strong>–ö—É–¥–∞ —Å–º–æ—Ç—Ä–µ—Ç—å:</strong> ‚Üí –†–µ–∑—É–ª—å—Ç–∞—Ç –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—Å—è –Ω–∏–∂–µ. TG_LANG –¥–æ—Å—Ç—É–ø–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ - —Ç–æ–ª—å–∫–æ –∏–∑ AllowedEnvVars.</p>
        </div>
        <div class="actions">
            <button hx-get="/api/demo/env" hx-target="#env-result" hx-swap="innerHTML" hx-indicator="#env-spinner">
                –ü–æ–ª—É—á–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è <span id="env-spinner" class="spinner htmx-indicator"></span>
            </button>
        </div>
        <div id="env-result" class="result">
            <div class="loading-text htmx-indicator">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
        </div>
    </div>

    <!-- 10. –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –≤—ã–±–æ—Ä -->
    <div class="section">
        <h2>10. –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –≤—ã–±–æ—Ä - Interactive Select</h2>
        <div class="description">
            <p><strong>–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:</strong> Interactive Select –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–ª–∞–≥–∏–Ω–∞–º –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å –≤—ã–±–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ —Å–ø–∏—Å–∫–∞ –æ–ø—Ü–∏–π —á–µ—Ä–µ–∑ –∫–æ–Ω—Å–æ–ª—å. –≠—Ç–æ –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–ª–∞–≥–∏–Ω–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —Ç—Ä–µ–±—É—é—Ç –≤—ã–±–æ—Ä–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.</p>
            <p><strong>–ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç:</strong></p>
            <ul>
                <li>–í –∫–æ–Ω—Å–æ–ª–∏, –≥–¥–µ –∑–∞–ø—É—â–µ–Ω –ø–ª–∞–≥–∏–Ω, –ø–æ—è–≤–∏—Ç—Å—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π prompt —Å –æ–ø—Ü–∏—è–º–∏</li>
                <li>–í—ã —Å–º–æ–∂–µ—Ç–µ –≤—ã–±—Ä–∞—Ç—å –æ–¥–Ω—É –∏–∑ –æ–ø—Ü–∏–π –≤ –∫–æ–Ω—Å–æ–ª–∏</li>
                <li>–†–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–±–æ—Ä–∞ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—Å—è –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ –Ω–∏–∂–µ</li>
            </ul>
            <p><strong>–ö—É–¥–∞ —Å–º–æ—Ç—Ä–µ—Ç—å:</strong> ‚Üí –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å, –≥–¥–µ –∑–∞–ø—É—â–µ–Ω –ø–ª–∞–≥–∏–Ω - —Ç–∞–º –ø–æ—è–≤–∏—Ç—Å—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –≤—ã–±–æ—Ä. –ü–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—Å—è –Ω–∏–∂–µ –≤ JSON —Ñ–æ—Ä–º–∞—Ç–µ.</p>
        </div>
        <div class="actions">
            <button hx-post="/api/demo/interactive-select" hx-vals='{"prompt":"–í—ã–±–µ—Ä–∏—Ç–µ –æ–ø—Ü–∏—é:","options":["–û–ø—Ü–∏—è 1","–û–ø—Ü–∏—è 2","–û–ø—Ü–∏—è 3"]}' hx-target="#interactive-select-result" hx-swap="innerHTML" hx-indicator="#interactive-select-spinner">
                –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—ã–±–æ—Ä –æ–ø—Ü–∏–π <span id="interactive-select-spinner" class="spinner htmx-indicator"></span>
            </button>
        </div>
        <div id="interactive-select-result" class="result">
            <div class="loading-text htmx-indicator">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
        </div>
    </div>

    <!-- 11. –í—ã—á–∏—Å–ª–µ–Ω–∏–µ —Ö—ç—à–∞ —Ñ–∞–π–ª–∞ -->
    <div class="section">
        <h2>11. –í—ã—á–∏—Å–ª–µ–Ω–∏–µ —Ö—ç—à–∞ —Ñ–∞–π–ª–∞ - –∑–∞–≥—Ä—É–∑–∫–∞ –∏ —Ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ</h2>
        <div class="description">
            <p><strong>–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:</strong> –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–∞ —á–µ—Ä–µ–∑ drag-and-drop –∏ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –µ–≥–æ SHA256 —Ö—ç—à–∞. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–∞–±–æ—Ç—É —Å multipart/form-data –∑–∞–ø—Ä–æ—Å–∞–º–∏.</p>
            <p><strong>–ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç:</strong></p>
            <ul>
                <li>–í—ã —Å–º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ—Ç–∞—â–∏—Ç—å —Ñ–∞–π–ª –≤ –∑–æ–Ω—É –∑–∞–≥—Ä—É–∑–∫–∏ –∏–ª–∏ –≤—ã–±—Ä–∞—Ç—å —Ñ–∞–π–ª —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É</li>
                <li>–§–∞–π–ª –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä</li>
                <li>–ë—É–¥–µ—Ç –≤—ã—á–∏—Å–ª–µ–Ω SHA256 —Ö—ç—à —Ñ–∞–π–ª–∞</li>
                <li>–†–µ–∑—É–ª—å—Ç–∞—Ç –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—Å—è –Ω–∏–∂–µ —Å –∏–º–µ–Ω–µ–º —Ñ–∞–π–ª–∞, —Ä–∞–∑–º–µ—Ä–æ–º –∏ —Ö—ç—à–µ–º</li>
            </ul>
            <p><strong>–ö—É–¥–∞ —Å–º–æ—Ç—Ä–µ—Ç—å:</strong> ‚Üí –†–µ–∑—É–ª—å—Ç–∞—Ç –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—Å—è –Ω–∏–∂–µ —Å —Ö—ç—à–µ–º —Ñ–∞–π–ª–∞</p>
        </div>
        <div class="actions">
            <div class="file-drop-zone" id="file-drop-zone" onclick="document.getElementById('file-input').click()">
                <div class="file-icon">üìÅ</div>
                <p><strong>–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Ñ–∞–π–ª —Å—é–¥–∞</strong></p>
                <p>–∏–ª–∏</p>
                <p>–Ω–∞–∂–º–∏—Ç–µ –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ñ–∞–π–ª–∞</p>
            </div>
            <input type="file" id="file-input" class="file-input"/> <span id="file-hash-spinner" class="spinner htmx-indicator"></span>
            <div id="progress-container" class="progress-container">
                <div class="progress-bar">
                    <div id="progress-fill" class="progress-fill" style="width: 0%">0%</div>
                </div>
                <div id="progress-text" class="progress-text">–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ñ–∞–π–ª–∞...</div>
            </div>
        </div>
        <div id="file-hash-result" class="result">
            <div class="loading-text htmx-indicator">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
        </div>
    </div>

    <!-- 12. –ó–∞–¥–∞—á–∏ - –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ -->
    <div class="section">
        <h2>12. –ó–∞–¥–∞—á–∏ - –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ</h2>
        <div class="description">
            <p><strong>–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:</strong> –ó–∞–¥–∞—á–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç –ø–ª–∞–≥–∏–Ω–∞–º –≤—ã–ø–æ–ª–Ω—è—Ç—å –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è –≤ —Ñ–æ–Ω–µ. –≠—Ç–æ –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞, —Å–±–æ—Ä–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è –æ–ø–µ—Ä–∞—Ü–∏–π.</p>
            <p><strong>–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:</strong></p>
            <ul>
                <li><strong>StartTask(interval, handler)</strong> - –∑–∞–ø—É—Å–∫ –∑–∞–¥–∞—á–∏ —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º</li>
                <li><strong>StopTask(taskID)</strong> - –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∑–∞–¥–∞—á–∏</li>
                <li><strong>StopAll()</strong> - –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–¥–∞—á</li>
                <li><strong>–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞</strong> - –µ—Å–ª–∏ handler –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç false, –∑–∞–¥–∞—á–∞ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏</li>
            </ul>
            <p><strong>–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:</strong></p>
            <ul>
                <li>–ó–∞–¥–∞—á–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ —Ñ–æ–Ω–µ —Ö–æ—Å—Ç–æ–º</li>
                <li>Handler –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º</li>
                <li>–î–∞–Ω–Ω—ã–µ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å (slog) –∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ</li>
                <li>–ï—Å–ª–∏ handler –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç false, –∑–∞–¥–∞—á–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è</li>
            </ul>
        </div>

        <!-- –°—Ç–∞—Ç—É—Å –≤—Å–µ—Ö –∑–∞–¥–∞—á -->
        <div style="margin: 20px 0;">
            <h3 style="color: #34495e; margin-bottom: 10px;">–°—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á</h3>
            <div class="actions">
                <button hx-get="/api/demo/tasks/status" hx-target="#tasks-status" hx-swap="innerHTML" hx-indicator="#tasks-spinner" hx-trigger="load, every 2s">
                    –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å <span id="tasks-spinner" class="spinner htmx-indicator"></span>
                </button>
                <button class="danger" hx-post="/api/demo/tasks/stop-all" hx-swap="none" hx-indicator="#tasks-stop-all-spinner" hx-on::after-request="handleStopAllTasks(event)">
                    –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ –∑–∞–¥–∞—á–∏ <span id="tasks-stop-all-spinner" class="spinner htmx-indicator"></span>
                </button>
            </div>
            <div id="tasks-status" class="result" style="margin-top: 15px;">
                <div class="loading-text htmx-indicator">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
            </div>
        </div>

        <!-- –°—Ü–µ–Ω–∞—Ä–∏–∏ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ -->
        <div style="margin-top: 30px;">
            <h3 style="color: #34495e; margin-bottom: 15px;">–°—Ü–µ–Ω–∞—Ä–∏–∏ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏</h3>

            <div class="tabs">
                <div class="tabs-header">
                    <button class="tab-button active" onclick="switchTab('counter')">–°—á–µ—Ç—á–∏–∫</button>
                    <button class="tab-button" onclick="switchTab('monitor')">–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥</button>
                    <button class="tab-button" onclick="switchTab('stats')">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</button>
                </div>

                <!-- 1. –°—á–µ—Ç—á–∏–∫ -->
                <div id="tab-counter" class="tab-content active">
                    <h4>–°—á–µ—Ç—á–∏–∫ (–∞–≤—Ç–æ—Å—Ç–æ–ø –ø–æ—Å–ª–µ 5 –∏—Ç–µ—Ä–∞—Ü–∏–π)</h4>
                    <p>
                        –ó–∞–¥–∞—á–∞ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Å—á–µ—Ç—á–∏–∫ –∫–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ 5 –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–π. –õ–æ–≥–∏ –≤—ã–≤–æ–¥—è—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å, –¥–∞–Ω–Ω—ã–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ. </p>
                    <div class="actions">
                        <button hx-post="/api/demo/task/counter" hx-vals='{"interval":"2s","maxExecutions":"5"}' hx-swap="none" hx-indicator="#task-counter-spinner" hx-on::after-request="showTaskToast(event)">
                            –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å—á–µ—Ç—á–∏–∫ <span id="task-counter-spinner" class="spinner htmx-indicator"></span>
                        </button>
                    </div>
                </div>

                <!-- 2. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤—Ä–µ–º–µ–Ω–∏ -->
                <div id="tab-monitor" class="tab-content">
                    <h4>–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤—Ä–µ–º–µ–Ω–∏</h4>
                    <p>
                        –ó–∞–¥–∞—á–∞ –ª–æ–≥–∏—Ä—É–µ—Ç —Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è –∫–∞–∂–¥—ã–µ 3 —Å–µ–∫—É–Ω–¥—ã. –†–∞–±–æ—Ç–∞–µ—Ç –¥–æ —Ä—É—á–Ω–æ–π –æ—Å—Ç–∞–Ω–æ–≤–∫–∏. –í—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ. </p>
                    <div class="actions">
                        <button hx-post="/api/demo/task/monitor" hx-vals='{"interval":"3s"}' hx-swap="none" hx-indicator="#task-monitor-spinner" hx-on::after-request="showTaskToast(event)">
                            –ó–∞–ø—É—Å—Ç–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ <span id="task-monitor-spinner" class="spinner htmx-indicator"></span>
                        </button>
                    </div>
                </div>

                <!-- 3. –°–±–æ—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ -->
                <div id="tab-stats" class="tab-content">
                    <h4>–°–±–æ—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏</h4>
                    <p>
                        –ó–∞–¥–∞—á–∞ —Å–æ–±–∏—Ä–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥. –î–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É —Å –¥–∞–Ω–Ω—ã–º–∏ –≤ –∑–∞–¥–∞—á–∞—Ö. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ. </p>
                    <div class="actions">
                        <button hx-post="/api/demo/task/stats" hx-vals='{"interval":"5s"}' hx-swap="none" hx-indicator="#task-stats-spinner" hx-on::after-request="showTaskToast(event)">
                            –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–±–æ—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ <span id="task-stats-spinner" class="spinner htmx-indicator"></span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è JSON –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
    function formatJSON() {
        document.querySelectorAll('pre.json').forEach(function (pre) {
            try {
                const text = pre.textContent.trim()
                if (text && (text.startsWith('{') || text.startsWith('['))) {
                    const parsed = JSON.parse(text)
                    pre.textContent = JSON.stringify(parsed, null, 2)
                }
            } catch (e) {
                // –ï—Å–ª–∏ –Ω–µ JSON, –æ—Å—Ç–∞–≤–ª—è–µ–º –∫–∞–∫ –µ—Å—Ç—å
            }
        })
    }

    // –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º JSON –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    document.addEventListener('DOMContentLoaded', formatJSON)

    // –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º JSON –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ —á–µ—Ä–µ–∑ htmx
    document.body.addEventListener('htmx:afterSwap', formatJSON)
    document.body.addEventListener('htmx:afterSettle', formatJSON)

    // –ì–ª–æ–±–∞–ª—å–Ω—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ –¥–ª—è –¥–ª–∏—Ç–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
    const globalLoading = document.getElementById('global-loading')
    let loadingTimeout = null

    document.body.addEventListener('htmx:beforeRequest', function (event) {
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≥–ª–æ–±–∞–ª—å–Ω—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä —á–µ—Ä–µ–∑ 100ms –¥–ª—è –¥–ª–∏—Ç–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
        loadingTimeout = setTimeout(function () {
            globalLoading.classList.add('active')
        }, 100)
    })

    document.body.addEventListener('htmx:afterRequest', function (event) {
        // –°–∫—Ä—ã–≤–∞–µ–º –≥–ª–æ–±–∞–ª—å–Ω—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä
        if (loadingTimeout) {
            clearTimeout(loadingTimeout)
            loadingTimeout = null
        }
        globalLoading.classList.remove('active')
    })

    document.body.addEventListener('htmx:responseError', function (event) {
        // –°–∫—Ä—ã–≤–∞–µ–º –ø—Ä–∏ –æ—à–∏–±–∫–µ
        if (loadingTimeout) {
            clearTimeout(loadingTimeout)
            loadingTimeout = null
        }
        globalLoading.classList.remove('active')
    });

    (function () {
        const dropZone = document.getElementById('file-drop-zone')
        const fileInput = document.getElementById('file-input')
        const resultDiv = document.getElementById('file-hash-result')
        const progressContainer = document.getElementById('progress-container')
        const progressFill = document.getElementById('progress-fill')
        const progressText = document.getElementById('progress-text')

        function updateProgress(percent, text) {
            progressFill.style.width = percent + '%'
            progressFill.textContent = Math.round(percent) + '%'
            progressText.textContent = text
        }

        // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –±—Ä–∞—É–∑–µ—Ä–∞ –¥–ª—è drag-and-drop
        ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
            dropZone.addEventListener(eventName, preventDefaults, false)
            document.body.addEventListener(eventName, preventDefaults, false)
        })

        function preventDefaults(e) {
            e.preventDefault()
            e.stopPropagation()
        }

        // –î–æ–±–∞–≤–ª—è–µ–º –≤–∏–∑—É–∞–ª—å–Ω—É—é –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å –ø—Ä–∏ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–∏
        ['dragenter', 'dragover'].forEach(eventName => {
            dropZone.addEventListener(eventName, () => {
                dropZone.classList.add('dragover')
            }, false)
        });

        ['dragleave', 'drop'].forEach(eventName => {
            dropZone.addEventListener(eventName, () => {
                dropZone.classList.remove('dragover')
            }, false)
        })

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ drop
        dropZone.addEventListener('drop', handleDrop, false)

        function handleDrop(e) {
            const dt = e.dataTransfer
            const files = dt.files
            if (files.length > 0) {
                uploadFile(files[0])
            }
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–±–æ—Ä–∞ —Ñ–∞–π–ª–∞ —á–µ—Ä–µ–∑ input
        fileInput.addEventListener('change', function (e) {
            if (e.target.files.length > 0) {
                uploadFile(e.target.files[0])
            }
        })

        function uploadFile(file) {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ (–º–∞–∫—Å–∏–º—É–º 50MB)
            const maxSize = 50 * 1024 * 1024 // 50MB
            if (file.size > maxSize) {
                resultDiv.innerHTML = '<div class="error">–§–∞–π–ª —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π. –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä: 50MB. –í–∞—à —Ñ–∞–π–ª: ' +
                    (file.size / 1024 / 1024).toFixed(2) + 'MB</div>'
                return
            }

            if (file.size === 0) {
                resultDiv.innerHTML = '<div class="error">–§–∞–π–ª –ø—É—Å—Ç–æ–π. –í—ã–±–µ—Ä–∏—Ç–µ –¥—Ä—É–≥–æ–π —Ñ–∞–π–ª.</div>'
                return
            }

            // –û—á–∏—â–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
            resultDiv.innerHTML = ''
            resultDiv.style.display = 'none'

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä
            progressContainer.classList.add('active')
            updateProgress(0, '–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ñ–∞–π–ª–∞...')

            // –ß–∏—Ç–∞–µ–º —Ñ–∞–π–ª –∫–∞–∫ base64
            const reader = new FileReader()

            reader.onprogress = function (e) {
                if (e.lengthComputable) {
                    const percent = (e.loaded / e.total) * 50 // –ß—Ç–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ - –ø–µ—Ä–≤–∞—è –ø–æ–ª–æ–≤–∏–Ω–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
                    updateProgress(percent, '–ß—Ç–µ–Ω–∏–µ —Ñ–∞–π–ª–∞... ' +
                        (e.loaded / 1024).toFixed(1) + ' KB / ' +
                        (e.total / 1024).toFixed(1) + ' KB')
                }
            }

            reader.onload = function (e) {
                const base64Data = e.target.result.split(',')[1] // –£–±–∏—Ä–∞–µ–º –ø—Ä–µ—Ñ–∏–∫—Å data:...
                const fileName = file.name

                // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∫–∞–∫ JSON
                const requestData = {
                    fileName: fileName,
                    fileData: base64Data
                }

                // –°–µ—Ä–∏–∞–ª–∏–∑—É–µ–º JSON –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ —Ä–∞–∑–º–µ—Ä–∞
                const jsonString = JSON.stringify(requestData)
                const jsonSize = new Blob([jsonString]).size

                updateProgress(50, '–§–∞–π–ª –ø—Ä–æ—á–∏—Ç–∞–Ω, –æ—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä... (' +
                    (jsonSize / 1024).toFixed(1) + ' KB)')

                const xhr = new XMLHttpRequest()

                // –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º —Ä–µ–∞–ª—å–Ω—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö
                let lastLoaded = 0
                let lastTime = Date.now()
                let progressInterval = null

                xhr.upload.onprogress = function (e) {
                    const now = Date.now()
                    const timeDiff = (now - lastTime) / 1000 // –≤ —Å–µ–∫—É–Ω–¥–∞—Ö

                    if (e.lengthComputable && e.total > 0) {
                        const uploadPercent = (e.loaded / e.total) * 40 // –û—Ç–ø—Ä–∞–≤–∫–∞ - 50-90%
                        const totalPercent = 50 + uploadPercent

                        // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º —Å–∫–æ—Ä–æ—Å—Ç—å
                        let speedText = ''
                        if (timeDiff > 0 && e.loaded > lastLoaded) {
                            const speed = (e.loaded - lastLoaded) / timeDiff
                            speedText = ' (' + (speed / 1024).toFixed(1) + ' KB/s)'
                        }

                        updateProgress(totalPercent, '–û—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–∞–π–ª–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä... ' +
                            (e.loaded / 1024).toFixed(1) + ' KB / ' +
                            (e.total / 1024).toFixed(1) + ' KB' + speedText)

                        lastLoaded = e.loaded
                        lastTime = now
                    } else if (e.loaded > 0) {
                        // –ï—Å–ª–∏ total –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ö–æ—Ç—è –±—ã –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–µ
                        const estimatedPercent = 50 + Math.min((e.loaded / jsonSize) * 40, 40)
                        let speedText = ''
                        if (timeDiff > 0 && e.loaded > lastLoaded) {
                            const speed = (e.loaded - lastLoaded) / timeDiff
                            speedText = ' (' + (speed / 1024).toFixed(1) + ' KB/s)'
                        }
                        updateProgress(estimatedPercent, '–û—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–∞–π–ª–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä... ' +
                            (e.loaded / 1024).toFixed(1) + ' KB' + speedText)
                        lastLoaded = e.loaded
                        lastTime = now
                    }
                }

                // Fallback: –µ—Å–ª–∏ onprogress –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ö–æ—Ç—è –±—ã —á—Ç–æ-—Ç–æ
                xhr.upload.onloadstart = function () {
                    updateProgress(50, '–ù–∞—á–∞–ª–æ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–∞–π–ª–∞...')
                    lastTime = Date.now()
                }

                xhr.onload = function () {
                    // –û—á–∏—â–∞–µ–º –∏–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –µ—Å–ª–∏ –±—ã–ª
                    if (progressInterval) {
                        clearInterval(progressInterval)
                    }

                    updateProgress(90, '–í—ã—á–∏—Å–ª–µ–Ω–∏–µ —Ö—ç—à–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ...')

                    if (xhr.status === 200) {
                        updateProgress(100, '–ì–æ—Ç–æ–≤–æ!')
                        setTimeout(function () {
                            progressContainer.classList.remove('active')
                            resultDiv.style.display = 'block'
                            resultDiv.innerHTML = xhr.responseText
                            // –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º JSON –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏
                            formatJSON()
                        }, 300)
                    } else {
                        progressContainer.classList.remove('active')
                        resultDiv.style.display = 'block'
                        let errorMsg = '–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞: ' + xhr.status + ' ' + xhr.statusText
                        if (xhr.responseText) {
                            errorMsg += '<br>–û—Ç–≤–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞: ' + xhr.responseText.substring(0, 200)
                        }
                        resultDiv.innerHTML = '<div class="error">' + errorMsg + '</div>'
                    }
                }

                xhr.onerror = function () {
                    if (progressInterval) {
                        clearInterval(progressInterval)
                    }
                    progressContainer.classList.remove('active')
                    resultDiv.style.display = 'block'
                    let errorMsg = '–û—à–∏–±–∫–∞ —Å–µ—Ç–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ñ–∞–π–ª–∞.'
                    if (xhr.status !== 0) {
                        errorMsg += ' –°—Ç–∞—Ç—É—Å: ' + xhr.status + ' ' + xhr.statusText
                    }
                    errorMsg += '<br>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12) –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.'
                    resultDiv.innerHTML = '<div class="error">' + errorMsg + '</div>'
                    console.error('XHR error:', {
                        status: xhr.status,
                        statusText: xhr.statusText,
                        readyState: xhr.readyState,
                        responseText: xhr.responseText
                    })
                }

                xhr.ontimeout = function () {
                    if (progressInterval) {
                        clearInterval(progressInterval)
                    }
                    progressContainer.classList.remove('active')
                    resultDiv.style.display = 'block'
                    resultDiv.innerHTML = '<div class="error">–ü—Ä–µ–≤—ã—à–µ–Ω–æ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ñ–∞–π–ª–∞ (60 —Å–µ–∫—É–Ω–¥). –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Ñ–∞–π–ª –º–µ–Ω—å—à–µ–≥–æ —Ä–∞–∑–º–µ—Ä–∞.</div>'
                }

                xhr.onabort = function () {
                    if (progressInterval) {
                        clearInterval(progressInterval)
                    }
                    progressContainer.classList.remove('active')
                    resultDiv.style.display = 'block'
                    resultDiv.innerHTML = '<div class="error">–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞ –±—ã–ª–∞ –ø—Ä–µ—Ä–≤–∞–Ω–∞.</div>'
                }

                // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–∞–π–º–∞—É—Ç 60 —Å–µ–∫—É–Ω–¥ –¥–ª—è –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤
                xhr.timeout = 60000

                try {
                    xhr.open('POST', '/api/demo/file-hash', true)
                    xhr.setRequestHeader('Content-Type', 'application/json')

                    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ
                    // –ò—Å–ø–æ–ª—å–∑—É–µ–º Blob –¥–ª—è –±–æ–ª–µ–µ —Ç–æ—á–Ω–æ–≥–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
                    const blob = new Blob([jsonString], {type: 'application/json'})
                    xhr.send(blob)
                } catch (e) {
                    progressContainer.classList.remove('active')
                    resultDiv.style.display = 'block'
                    resultDiv.innerHTML = '<div class="error">–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –∑–∞–ø—Ä–æ—Å–∞: ' + e.message + '</div>'
                    console.error('Exception:', e)
                }
            }

            reader.onerror = function () {
                progressContainer.classList.remove('active')
                resultDiv.style.display = 'block'
                resultDiv.innerHTML = '<div class="error">–û—à–∏–±–∫–∞ –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏ —Ñ–∞–π–ª–∞.</div>'
            }

            // –ß–∏—Ç–∞–µ–º —Ñ–∞–π–ª –∫–∞–∫ Data URL (base64)
            reader.readAsDataURL(file)
        }
    })();

    // –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ç–∞–±–æ–≤
    function switchTab(tabName) {
        // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ —Ç–∞–±—ã
        document.querySelectorAll('.tab-content').forEach(function (tab) {
            tab.classList.remove('active')
        })

        // –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —Å–æ –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫
        document.querySelectorAll('.tab-button').forEach(function (button) {
            button.classList.remove('active')
        })

        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–π —Ç–∞–±
        const selectedTab = document.getElementById('tab-' + tabName)
        if (selectedTab) {
            selectedTab.classList.add('active')
        }

        // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é –∫–Ω–æ–ø–∫—É
        document.querySelectorAll('.tab-button').forEach(function (button) {
            if (button.getAttribute('onclick') === "switchTab('" + tabName + "')") {
                button.classList.add('active')
            }
        })
    }

    // –§—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞ toast —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
    function showToast(title, message, type) {
        type = type || 'success'
        const container = document.getElementById('toast-container')
        if (!container) return

        const toast = document.createElement('div')
        toast.className = 'toast ' + type

        const icon = type === 'success' ? '‚úì' : type === 'error' ? '‚úï' : '‚ö†'
        toast.innerHTML = `
                <span class="toast-icon">${icon}</span>
                <div class="toast-content">
                    <div class="toast-title">${title}</div>
                    <div class="toast-message">${message}</div>
                </div>
                <button class="toast-close" onclick="this.parentElement.remove()">√ó</button>
            `

        container.appendChild(toast)

        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è–µ–º —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
        setTimeout(function () {
            toast.classList.add('fade-out')
            setTimeout(function () {
                if (toast.parentElement) {
                    toast.remove()
                }
            }, 300)
        }, 5000)
    }

    // –§—É–Ω–∫—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—Ç–≤–µ—Ç–∞ –æ—Ç –∑–∞–¥–∞—á–∏ –∏ –ø–æ–∫–∞–∑–∞ toast
    function showTaskToast(event) {
        if (event.detail.xhr && event.detail.xhr.status === 200) {
            const responseText = event.detail.xhr.responseText
            const parser = new DOMParser()
            const doc = parser.parseFromString(responseText, 'text/html')

            // –ò—â–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ –∏–ª–∏ –æ—à–∏–±–∫–µ
            const successDiv = doc.querySelector('.success')
            const errorDiv = doc.querySelector('.error')

            if (errorDiv) {
                showToast('–û—à–∏–±–∫–∞', errorDiv.textContent.trim(), 'error')
            } else if (successDiv) {
                const message = successDiv.textContent.trim()
                // –ü—ã—Ç–∞–µ–º—Å—è –∏–∑–≤–ª–µ—á—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∑–∞–¥–∞—á–µ
                const taskInfo = doc.querySelector('p')
                if (taskInfo) {
                    showToast('–ó–∞–¥–∞—á–∞ –∑–∞–ø—É—â–µ–Ω–∞', message, 'success')
                } else {
                    showToast('–£—Å–ø–µ—à–Ω–æ', message, 'success')
                }
            } else {
                showToast('–£—Å–ø–µ—à–Ω–æ', '–û–ø–µ—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∞', 'success')
            }

            // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–∞–±–ª–∏—Ü—É —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–¥–∞—á
            setTimeout(function () {
                const statusButton = document.querySelector('[hx-get="/api/demo/tasks/status"]')
                if (statusButton) {
                    statusButton.click()
                }
            }, 500)
        } else if (event.detail.xhr && event.detail.xhr.status !== 200) {
            showToast('–û—à–∏–±–∫–∞', '–ù–µ —É–¥–∞–ª–æ—Å—å –≤—ã–ø–æ–ª–Ω–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é', 'error')
        }
    }

    // –§—É–Ω–∫—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–¥–∞—á–∏
    function handleTaskStop(event, taskID) {
        if (event.detail.xhr && event.detail.xhr.status === 200) {
            const responseText = event.detail.xhr.responseText
            const parser = new DOMParser()
            const doc = parser.parseFromString(responseText, 'text/html')

            const successDiv = doc.querySelector('.success')
            const errorDiv = doc.querySelector('.error')

            if (errorDiv) {
                showToast('–û—à–∏–±–∫–∞', errorDiv.textContent.trim(), 'error')
            } else if (successDiv) {
                showToast('–ó–∞–¥–∞—á–∞ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞', '–ó–∞–¥–∞—á–∞ ' + taskID + ' —É—Å–ø–µ—à–Ω–æ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞', 'success')
            }

            // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–∞–±–ª–∏—Ü—É —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–¥–∞—á
            setTimeout(function () {
                const statusButton = document.querySelector('[hx-get="/api/demo/tasks/status"]')
                if (statusButton) {
                    statusButton.click()
                }
            }, 500)
        } else {
            showToast('–û—à–∏–±–∫–∞', '–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–¥–∞—á—É', 'error')
        }
    }

    // –§—É–Ω–∫—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤—Å–µ—Ö –∑–∞–¥–∞—á
    function handleStopAllTasks(event) {
        if (event.detail.xhr && event.detail.xhr.status === 200) {
            const responseText = event.detail.xhr.responseText
            const parser = new DOMParser()
            const doc = parser.parseFromString(responseText, 'text/html')

            const messageDiv = doc.querySelector('div[style*="background: #e8f5e9"]')
            const errorDiv = doc.querySelector('.error')

            if (errorDiv) {
                showToast('–û—à–∏–±–∫–∞', errorDiv.textContent.trim(), 'error')
            } else if (messageDiv) {
                showToast('–í—Å–µ –∑–∞–¥–∞—á–∏ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã', messageDiv.textContent.trim(), 'success')
            } else {
                showToast('–£—Å–ø–µ—à–Ω–æ', '–í—Å–µ –∑–∞–¥–∞—á–∏ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã', 'success')
            }

            // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–∞–±–ª–∏—Ü—É —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–¥–∞—á
            setTimeout(function () {
                const statusButton = document.querySelector('[hx-get="/api/demo/tasks/status"]')
                if (statusButton) {
                    statusButton.click()
                }
            }, 500)
        } else {
            showToast('–û—à–∏–±–∫–∞', '–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–¥–∞—á–∏', 'error')
        }
    }
</script>
</body>

</html>